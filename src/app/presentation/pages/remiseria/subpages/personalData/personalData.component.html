<app-header-custom title="Administracion de" subtitle="Perfil">
  <span class="material-icons icon"> manage_accounts</span>
</app-header-custom>
<div style="text-align: center; max-width: 600px; margin: 10px auto; justify-content: center; align-items: center;max-height: 68vh; overflow: auto;" >
  <form *ngIf="employe" #productsForm="ngForm" id="form" class="row p-4 just-center">
    <h1 style="padding-bottom:15px">DATOS DE USUARIO</h1>
    <div class="col-md-12 v-emergente-scroll grip-colums">
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Nombre </mat-label>
          <input matInput maxlength="150" [(ngModel)]="employe.firstName" #name="ngModel" name="name" required
            minlength="1" />
        </mat-form-field>
        <div class="inline-flex items-center p-1 px-2 my-1 text-xs leading-none text-gray-800 bg-red-100 rounded-full font-weight-bold" *ngIf="name.invalid && (name.dirty || name.touched)">
          <div class="" *ngIf="name.errors?.required">
            Se requiere el nombre
          </div>
        </div>
      </div>
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Apellidos </mat-label>
          <input matInput maxlength="150" [(ngModel)]="employe.lastName" #lastName="ngModel" name="lastName" required
            minlength="1" />
        </mat-form-field>
        <div class="
            inline-flex
            items-center
            p-1
            px-2
            my-1
            text-xs
            leading-none
            text-gray-800
            bg-red-100
            rounded-full
            font-weight-bold
          " *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)">
          <div class="" *ngIf="lastName.errors?.required">
            Se requiere los apellidos
          </div>
        </div>
      </div>
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Dirección </mat-label>
          <input matInput maxlength="150" [(ngModel)]="employe.address" #address="ngModel" name="address" required
            minlength="1" />
        </mat-form-field>
        <div class="
            inline-flex
            items-center
            p-1
            px-2
            my-1
            text-xs
            leading-none
            text-gray-800
            bg-red-100
            rounded-full
            font-weight-bold
          " *ngIf="address.invalid && (address.dirty || address.touched)">
          <div class="" *ngIf="address.errors?.required">
            Se requiere una dirección
          </div>
        </div>
      </div>
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Insert Email</mat-label>
          <input matInput maxlength="150" [(ngModel)]="employe.email" #email="ngModel" name="email" required
            minlength="1" type="text" />
        </mat-form-field>
        <div class="
            inline-flex
            items-center
            p-1
            px-2
            my-1
            text-xs
            leading-none
            text-gray-800
            bg-red-100
            rounded-full
            font-weight-bold
          " *ngIf="email.invalid && (email.dirty || email.touched)">
          <div class="" *ngIf="email.errors?.required">Se requiere email</div>
          <div class="" *ngIf="email.errors?.email">Email no tiene formato</div>
        </div>
      </div>
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Teléfono</mat-label>
          <input matInput maxlength="150" [(ngModel)]="employe.phone" #phone="ngModel" name="phone" required
            minlength="1" type="number" />
        </mat-form-field>
        <div class="
            inline-flex
            items-center
            p-1
            px-2
            my-1
            text-xs
            leading-none
            text-gray-800
            bg-red-100
            rounded-full
            font-weight-bold
          " *ngIf="phone.invalid && (phone.dirty || phone.touched)">
          <div class="" *ngIf="phone.errors?.required">
            Se requiere Nro telefonico
          </div>
        </div>
      </div>
    </div>

    <input type="hidden" [(ngModel)]="employe.idUser" #password="ngModel" name="idUser" />
    <!-- buttons actions -->
    <button mat-flat-button color="primary" class="text-white w-100 h6" (click)="updateEmploye()"
      [disabled]="!productsForm.form.valid">
      <i class="mr-2 fas fa-save"></i>Actualizar Datos
    </button>
  </form>
  <form *ngIf="employe" #productsForm="ngForm" id="form2" class="row p-4 just-center">
    <h1 style="padding-bottom:15px">CAMBIO DE CONTRASEÑA</h1>
    <div class="col-md-12 v-emergente-scroll grip-colums">
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Usuario</mat-label>
          <input matInput maxlength="150" [(ngModel)]="username" #usernameInput="ngModel" name="username" minlength="1" required />
        </mat-form-field>
        <div class="inline-flex items-center p-1 px-2 my-1 text-xs leading-none text-gray-800 bg-red-100 rounded-full font-weight-bold" *ngIf="usernameInput.invalid && (usernameInput.dirty || usernameInput.touched)">
          <div *ngIf="usernameInput.errors?.required">Se requiere nombre de usuario</div>
        </div>
      </div>
  
      <div class="form-group">
        <mat-form-field appearance="fill">
          <mat-label class="block">Ingresar nueva contraseña</mat-label>
          <input matInput maxlength="150" [(ngModel)]="newPassword" #newPasswordField="ngModel" name="newPassword" required minlength="1" required [type]="showPassword ? 'text' : 'password'" />
          <button mat-icon-button matSuffix (click)="showPassword = !showPassword">
            <mat-icon>{{ showPassword ? 'visibility_off' : 'visibility' }}</mat-icon>
          </button>
        </mat-form-field>
        <div class="inline-flex items-center p-1 px-2 my-1 text-xs leading-none text-gray-800 bg-red-100 rounded-full font-weight-bold" *ngIf="newPasswordField.invalid && (newPasswordField.dirty || newPasswordField.touched)">
          <div *ngIf="newPasswordField.errors?.required">Se requiere contraseña</div>
        </div>
      </div>
    </div>
  
    <input type="hidden" [(ngModel)]="employe.idUser" name="idUser" />
  
    <!-- botones de acción -->
    <button mat-flat-button color="primary" class="text-white w-100 h6" (click)="validateUsername()" [disabled]="!productsForm.form.valid">
      <i class="mr-2 fas fa-save"></i>Actualizar Contraseña
    </button>
  </form>
</div>